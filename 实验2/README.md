# 实验二

key word: pipe, process, signal

## 实验内容：

建立通道用于两个进程间的通信，按 Ctrl + C 终止程序，两个子进程必须先被杀死，然后才终止父进程

## 实验过程：

```
main( ) {
	创建无名管道；
	设置软中断信号SIGINT；
	创建子进程1、2；
	等待子进程1、2退出；
	关闭管道；
}

父进程信号处理 {
	发SIGUSR1给子进程1；
	发SIGUSR2给子进程2；
}

子进程1 {
	设置忽略信号SIGINT；
	设置信号SIGUSR1；
	while(1) {
		发送数据至管道数据；
		计数器++；
		睡眠1秒；
	}
}

子进程2 {
	设置忽略信号SIGINT；
	设置信号SIGUSR1；
	while(1) {
		接收管道数据；
		显示数据；
	}
}

SIGUSR1信号处理 {
	关闭管道；
	显示退出信息；
	退出；
}
```

效果自己查看!!!

## 实验收获

用 `wait(NULL)`控制进程关闭的顺序。

`.sh` 文件用于检查其关闭顺序，是否总是先关闭进程1，再关闭进程2，最后关闭父进程，让其循环N次